(function(f,h){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position,b=f.fn.offset;f.fn.position=function(j){if(!j||!j.of){return a.apply(this,arguments)}j=f.extend({},j);var m=f(j.of),o=(j.collision||"flip").split(" "),n=j.offset?j.offset.split(" "):[0,0],l,i,k;if(j.of.nodeType===9){l=m.width();i=m.height();k={top:0,left:0}}else{if(j.of.scrollTo&&j.of.document){l=m.width();i=m.height();k={top:m.scrollTop(),left:m.scrollLeft()}}else{if(j.of.preventDefault){j.at="left top";l=i=0;k={top:j.of.pageY,left:j.of.pageX}}else{l=m.outerWidth();i=m.outerHeight();k=m.offset()}}}f.each(["my","at"],function(){var p=(j[this]||"").split(" ");if(p.length===1){p=c.test(p[0])?p.concat([g]):d.test(p[0])?[e].concat(p):[e,g]}p[0]=c.test(p[0])?p[0]:e;p[1]=d.test(p[1])?p[1]:g;j[this]=p});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(j.at[0]==="right"){k.left+=l}else{if(j.at[0]===e){k.left+=l/2}}if(j.at[1]==="bottom"){k.top+=i}else{if(j.at[1]===g){k.top+=i/2}}k.left+=n[0];k.top+=n[1];return this.each(function(){var s=f(this),r=s.outerWidth(),q=s.outerHeight(),p=f.extend({},k);if(j.my[0]==="right"){p.left-=r}else{if(j.my[0]===e){p.left-=r/2}}if(j.my[1]==="bottom"){p.top-=q}else{if(j.my[1]===g){p.top-=q/2}}p.left=parseInt(p.left);p.top=parseInt(p.top);f.each(["left","top"],function(u,t){if(f.ui.position[o[u]]){f.ui.position[o[u]][t](p,{targetWidth:l,targetHeight:i,elemWidth:r,elemHeight:q,offset:n,my:j.my,at:j.at})}});if(f.fn.bgiframe){s.bgiframe()}s.offset(f.extend(p,{using:j.using}))})};f.ui.position={fit:{left:function(i,j){var l=f(window),k=i.left+j.elemWidth-l.width()-l.scrollLeft();i.left=k>0?i.left-k:Math.max(0,i.left)},top:function(i,j){var l=f(window),k=i.top+j.elemHeight-l.height()-l.scrollTop();i.top=k>0?i.top-k:Math.max(0,i.top)}},flip:{left:function(j,k){if(k.at[0]==="center"){return}var m=f(window),l=j.left+k.elemWidth-m.width()-m.scrollLeft(),i=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,n=-2*k.offset[0];j.left+=j.left<0?i+k.targetWidth+n:l>0?i-k.targetWidth+n:0},top:function(j,l){if(l.at[1]==="center"){return}var n=f(window),m=j.top+l.elemHeight-n.height()-n.scrollTop(),i=l.my[1]==="top"?-l.elemHeight:l.my[1]==="bottom"?l.elemHeight:0,k=l.at[1]==="top"?l.targetHeight:-l.targetHeight,o=-2*l.offset[1];j.top+=j.top<0?i+l.targetHeight+o:m>0?i+k+o:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(m,j){if(/static/.test(f.curCSS(m,"position"))){m.style.position="relative"}var l=f(m),o=l.offset(),i=parseInt(f.curCSS(m,"top",true),10)||0,n=parseInt(f.curCSS(m,"left",true),10)||0,k={top:(j.top-o.top)+i,left:(j.left-o.left)+n};if("using" in j){j.using.call(m,k)}else{l.css(k)}};f.fn.offset=function(i){var j=this[0];if(!j||!j.ownerDocument){return null}if(i){return this.each(function(){f.offset.setOffset(this,i)})}return b.call(this)}}}(jQuery));